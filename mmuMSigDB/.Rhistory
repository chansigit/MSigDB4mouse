unique(data.price[,"year"])
sort(unique(data.price[,"year"]))
head(data.price)
sort(unique(data.price[,"cp4"]))
head(data.price[,"cp4"])
class(data.price[,"cp4"])
head(data.price[,"cp4"])
head(data.price[,"cp4"])==NA
is.na(head(data.price[,"cp4"]))
library(sqldf)
install.packages("sqldf")
res<-sqldf("select * from data.price where cp4 is \"NA\"")
library(sqldf)
res<-sqldf("select * from data.price where cp4 is \"NA\"")
res<-sqldf("select * from data.price where cp4 is \"NA\"")
res<-sqldf("select * from 'data.price' where cp4 is \"NA\"")
res
head(data.price)
res<-sqldf("select * from 'data.price' where id=110101100001668000)
""
))))
â€?â€?â€?""
res<-sqldf("select * from 'data.price' where id=110101100001668000")
res
res[1,3]
res[1,2]
res[1,1]
res<-sqldf("select * from 'data.price' where id=110101100001668000" and cp4>0)
res<-sqldf("select * from 'data.price' where id=110101100001668000 and cp4>0")
res
res<-sqldf("select * from 'data.price' where id=110101100001668000 and cp4=0")
res
res<-sqldf("select * from 'data.price' where id=110101100001668000 and cp4=NA")
res
res<-sqldf("select * from 'data.price' where id=110101100001668000 and cp4=â€˜NAâ€?)
res[1,]
res<-sqldf("select * from 'data.price' where id=110101100001668000 and cp4='NA")
res<-sqldf("select * from 'data.price' where id=110101100001668000 and cp4='NA'")
res
res<-sqldf("select * from 'data.price' where id=110101100001668000 and is.na(cp4)")
res<-sqldf("select * from 'data.price' where id=110101100001668000 and cp4 is \'NA\'")
res
res[1,]
res<-sqldf("select * from 'data.price' where id=110101100001668000 and cp4 is \"NA\"")
res
res<-sqldf("select * from 'data.price' where id=110101100001668000 and cp4 <0")
res
res<-sqldf("select * from 'data.price' where id=110101100001668000 and cp4 >0")
res
res<-sqldf("select * from 'data.price' where  cp4 <0")
res
data.price[,"id"]
class(data.price[,"id"])
length(data.price[,"id"])
# Number of records
length(data.price[,"id"])
nrow(data.price)
# Number of unique IDs
unique(data.price[,"id"])
# Number of unique IDs
nrow(unique(data.price[,"id"]))
# Number of unique IDs
length(unique(data.price[,"id"]))
# Number of records
nRecord <- nrow(data.price)
# Number of unique IDs
nFirm <- length(unique(data.price[,"id"]))
nRecord/nFirm
# Number of unique IDs
firms<-unique(data.price[,"id"])
nFirm <- length(firms)
library(readstata13)
data.indus13oil <- read.dta13("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/V need your help again0217/data indus13oil.dta")
data.price <- read.dta13("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/V need your help again0217/the price and quantity of products.dta")
# Number of records
nRecord <- nrow(data.price)
# Number of unique IDs
firms<-unique(data.price[,"id"])
nFirm <- length(firms)
nRecord/nFirm
nFirm
data.price
View(data.indus13oil)
data.indus13oil[,"year"]
data.indus13oil[,"year"==2009]
dataprice <- read.dta13("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/V need your help again0217/the price and quantity of products.dta")
dataindus13oil <- read.dta13("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/V need your help again0217/data indus13oil.dta")
dataindus13oil
dataprice
head(dataprice)
dataprice
head(dataindus13oil.id)
head(dataindus13oil)
head(dataprice)
dataorig<-read.dta13("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/V need your help again0217/sample10.dta")
head(dataorig)
nrow(dataorig)
dataorig<-read.dta13(select.rows=5,
file="S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/V need your help again0217/sample10.dta")
dataorig
dataorig[,1:5]
dataorig<-read.dta13(select.rows=5,replace.strl = FALSE,
file="S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/V need your help again0217/sample10.dta")
dataorig[,1:5]
dataorig<-read.dta13(select.rows=5,replace.strl = FALSE,
file="S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/V need your help again0217/sample10.dta")
dataorig[,1:5]
dataorig<-read.dta13(select.rows=5,replace.strl = FALSE,nonint.factors = TRUE,
file="S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/V need your help again0217/sample10.dta")
dataorig[,1:5]
dataorig[,1]
class(dataorig[,1])
as.integer(dataorig[,1])
as.integer(dataorig[,1])
(dataorig[,1])
as.character(dataorig[,1])
dataorig<-read.dta13(select.rows=5,replace.strl = FALSE,nonint.factors = TRUE,
file="S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/V need your help again0217/sample10.dta")
as.character(dataorig[,1])
dataindus13oil
dataindus13oil$year
class(dataindus13oil$year)
class(dataprice$year)
result<-sqldf("SELECT dataindus13oil.*, dataprice.cp4, dataprice.cp9 FROM dataindus13oil    LEFT JOIN dataprice    ON dataindus13oil.taxid=dataprice.id and dataindus13oil.year=dataprice.year")
result
?write.csv
write.csv(x=result, file="S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/V need your help again0217/matched.csv")
dataindus13oil <- read.dta13("S:/éŽ´æˆ æ®‘é§æ°­ç‰æµ?/éŽ´æˆ æ®‘é§æ°­ç‰æµ?/æ¥‚æ¨¹ç´?V need your help again0217/data indus13oil.dta")
library(readstata13)
datanewprice <-read.dta13("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/V need your help again0217/sum data0220.dta")
newresult<-sqldf("SELECT dataindus13oil.*, datanewprice.cp4, datanewprice.cp9 FROM dataindus13oil    LEFT JOIN datanewprice    ON dataindus13oil.taxid=datanewprice.id and dataindus13oil.year=datanewprice.year")
library(sqldf)
newresult<-sqldf("SELECT dataindus13oil.*, datanewprice.cp4, datanewprice.cp9 FROM dataindus13oil    LEFT JOIN datanewprice    ON dataindus13oil.taxid=datanewprice.id and dataindus13oil.year=datanewprice.year")
write.csv(x=newresult, file="S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/V need your help again0217/new_matched.csv")
datanewprice
View(datanewprice)
datanewprice$id
class(datanewprice$id)
(datanewprice$cp4)
(datanewprice$cp4)==0
sum((datanewprice$cp4)==0)
sum(datanewprice$cp4==0)
(datanewprice$cp4!=0)
(datanewprice$cp4==NA )
(is.na(datanewprice$cp4) )
(!is.na(datanewprice$cp4) )
install.packages('IRkernel')
IRkernel::installspec()  # to register the kernel in the current R installation
install.packages("jupyter-client")
install.packages("jupyter")
install.packages('IRkernel')
IRkernel::installspec()  # to register the kernel in the current R installation
install.packages("IRkernel")
df<- read.csv("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/ç¨Žè´Ÿè½¬å«é—®é¢˜î‡€î•?mineVSindus13.csv",
header=TRUE, stringsAsFactors=FALSE,sep=",")
df<- read.csv("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/ç¨Žè´Ÿè½¬å«é—®é¢˜î‡€î•?mineVSindus13.csv",
header=TRUE, stringsAsFactors=FALSE,sep=",")
df<- read.csv("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/ç¨Žè´Ÿè½¬å«é—®é¢˜î‡€î•?mineVSindus13.csv",
header=TRUE, stringsAsFactors=FALSE,sep=",")
df<- read.csv("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/ç¨Žè´Ÿè½¬å«é—®é¢˜/mineVSindus13.csv",
header=TRUE, stringsAsFactors=FALSE,sep=",")
## Summarizes data.
## Gives count, mean, standard deviation, standard error of the mean, and confidence interval (default 95%).
##   data: a data frame.
##   measurevar: the name of a column that contains the variable to be summariezed
##   groupvars: a vector containing names of columns that contain grouping variables
##   na.rm: a boolean that indicates whether to ignore NA's
##   conf.interval: the percent range of the confidence interval (default is 95%)
summarySE <- function(data=NULL, measurevar, groupvars=NULL, na.rm=FALSE,
conf.interval=.95, .drop=TRUE) {
library(plyr)
# New version of length which can handle NA's: if na.rm==T, don't count them
length2 <- function (x, na.rm=FALSE) {
if (na.rm) sum(!is.na(x))
else       length(x)
}
# This does the summary. For each group's data frame, return a vector with
# N, mean, and sd
datac <- ddply(data, groupvars, .drop=.drop,
.fun = function(xx, col) {
c(N    = length2(xx[[col]], na.rm=na.rm),
mean = mean   (xx[[col]], na.rm=na.rm),
sd   = sd     (xx[[col]], na.rm=na.rm)
)
},
measurevar
)
# Rename the "mean" column
datac <- rename(datac, c("mean" = measurevar))
datac$se <- datac$sd / sqrt(datac$N)  # Calculate standard error of the mean
# Confidence interval multiplier for standard error
# Calculate t-statistic for confidence interval:
# e.g., if conf.interval is .95, use .975 (above/below), and use df=N-1
ciMult <- qt(conf.interval/2 + .5, datac$N-1)
datac$ci <- datac$se * ciMult
return(datac)
}
dfs <- summarySE(df, measurevar="value_added", groupvars=c("year","group"))
dfs <- summarySE(df, measurevar="value_added", groupvars=c("year","group"))
dfs
dfs <- summarySE(df, measurevar="value_added", groupvars=c("year","group"))
dfs
df<- read.csv("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/ç¨Žè´Ÿè½¬å«é—®é¢˜/mineVSindus13.csv",
header=TRUE, stringsAsFactors=FALSE,sep=",")
df
df<- read.csv("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/ç¨Žè´Ÿè½¬å«é—®é¢˜/mineVSindus13.csv",
header=TRUE, stringsAsFactors=FALSE,sep=",")
df
head(df)
df<- read.csv("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/ç¨Žè´Ÿè½¬å«é—®é¢˜/mineVSindus13.csv",
header=TRUE, stringsAsFactors=FALSE,sep=",")
head(df)
dfs <- summarySE(df, measurevar="value_added", groupvars=c("year","group"))
ggplot(dfs, aes(x=year, y=value_added, colour=group)) +
geom_errorbar(aes(ymin=value_added-se, ymax=value_added+se), width=.1) +
geom_line(aes(linetype=group, color=group)) +
geom_point()
library(ggplot2)
ggplot(dfs, aes(x=year, y=value_added, colour=group)) +
geom_errorbar(aes(ymin=value_added-se, ymax=value_added+se), width=.1) +
geom_line(aes(linetype=group, color=group)) +
geom_point()
head(df_feb22)
df_feb22<- read.csv("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/ç¨Žè´Ÿè½¬å«é—®é¢˜/mineVSindus13_Feb22.csv",
header=TRUE, stringsAsFactors=FALSE,sep=",")
head(df_feb22)
df_feb22<- read.csv("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/ç¨Žè´Ÿè½¬å«é—®é¢˜/mineVSindus13_Feb22.csv",
header=TRUE, stringsAsFactors=FALSE,sep=",")
head(df_feb22)
dfs <- summarySE(df_feb22, measurevar="profit", groupvars=c("year","group"))
head(df_feb22)
group
head(df_feb22)
dfs <- summarySE(df_feb22, measurevar="profit", groupvars=c("year","group"))
ggplot(dfs, aes(x=year, y=lpe, colour=group)) +
geom_errorbar(aes(ymin=lpe-se, ymax=lpe+se), width=.1) +
geom_line(aes(linetype=group, color=group)) +
geom_point()
dfs
df_feb22<- read.csv("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/ç¨Žè´Ÿè½¬å«é—®é¢˜/mineVSindus13_Feb22.csv",
header=TRUE, stringsAsFactors=FALSE,sep=",")
head(df_feb22)
dfs <- summarySE(df_feb22, measurevar="LPE", groupvars=c("year","group"))
ggplot(dfs, aes(x=year, y=lpe, colour=group)) +
geom_errorbar(aes(ymin=lpe-se, ymax=lpe+se), width=.1) +
geom_line(aes(linetype=group, color=group)) +
geom_point()
dfs <- summarySE(df_feb22, measurevar="lpe", groupvars=c("year","group"))
ggplot(dfs, aes(x=year, y=lpe, colour=group)) +
geom_errorbar(aes(ymin=lpe-se, ymax=lpe+se), width=.1) +
geom_line(aes(linetype=group, color=group)) +
geom_point()
df_feb22<- read.csv("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/ç¨Žè´Ÿè½¬å«é—®é¢˜/mineVSindus13_Feb22.csv",
header=TRUE, stringsAsFactors=FALSE,sep=",")
head(df_feb22)
dfs <- summarySE(df_feb22, measurevar="lpe", groupvars=c("year","group"))
ggplot(dfs, aes(x=year, y=lpe, colour=group)) +
geom_errorbar(aes(ymin=lpe-se, ymax=lpe+se), width=.1) +
geom_line(aes(linetype=group, color=group)) +
geom_point()
View(data.price)
ggplot(dfs, aes(x=year, y=lpe, colour=group)) +
geom_errorbar(aes(ymin=lpe-se, ymax=lpe+se), width=.1) +
geom_line(aes(linetype=group, color=group),size = 1) +
geom_point()
ggplot(dfs, aes(x=year, y=lpe, colour=group)) +
geom_errorbar(aes(ymin=lpe-se, ymax=lpe+se), width=.5) +
geom_line(aes(linetype=group, color=group),size = 1) +
geom_point()
ggplot(dfs, aes(x=year, y=lpe, colour=group)) +
geom_errorbar(aes(ymin=lpe-se, ymax=lpe+se), width=.3) +
geom_line(aes(linetype=group, color=group),size = 1) +
geom_point()
ggplot(dfs, aes(x=year, y=lpe, colour=group)) +
geom_errorbar(aes(ymin=lpe-se, ymax=lpe+se), width=.2) +
geom_line(aes(linetype=group, color=group),size = 1) +
geom_point()
ggplot(dfs, aes(x=year, y=lpe, colour=group)) +
geom_errorbar(aes(ymin=lpe-se, ymax=lpe+se), width=.2) +
geom_line(aes(linetype=group, color=group),size = 2) +
geom_point()
ggplot(dfs, aes(x=year, y=lpe, colour=group)) +
geom_errorbar(aes(ymin=lpe-se, ymax=lpe+se), width=.2, size=1) +
geom_line(aes(linetype=group, color=group),size = 2) +
geom_point()
df_feb22<- read.csv("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/ç¨Žè´Ÿè½¬å«é—®é¢˜/mineVSindus13_Feb22.csv",
header=TRUE, stringsAsFactors=FALSE,sep=",")
head(df_feb22)
dfs <- summarySE(df_feb22, measurevar="lpe", groupvars=c("year","group"))
ggplot(dfs, aes(x=year, y=lpe, colour=group)) +
geom_errorbar(aes(ymin=lpe-se, ymax=lpe+se), width=.2, size=1) +
geom_line(aes(linetype=group, color=group),size = 2) +
geom_point()
library(ggplot2)
df_feb22<- read.csv("S:/æˆ‘çš„åšæžœäº?æˆ‘çš„åšæžœäº?é«˜ä¼Ÿ/ç¨Žè´Ÿè½¬å«é—®é¢˜/mineVSindus13_Feb22.csv",
header=TRUE, stringsAsFactors=FALSE,sep=",")
head(df_feb22)
dfs <- summarySE(df_feb22, measurevar="lpe", groupvars=c("year","group"))
ggplot(dfs, aes(x=year, y=lpe, colour=group)) +
geom_errorbar(aes(ymin=lpe-se, ymax=lpe+se), width=.2, size=1) +
geom_line(aes(linetype=group, color=group),size = 2) +
geom_point()
capabilities()
capabilities()
install.packages(c("Rcpp","devtools","dplyr","plyr"))
install.packages(c("Seurat"))
install.packages(c(""))
if (!requireNamespace("BiocManager", quietly = TRUE))
install.packages("BiocManager")
BiocManager::install()
BiocManager::install(c("GenomicFeatures", "AnnotationDbi"))
q()
human = useMart("ensembl", dataset = "hsapiens_gene_ensembl")
library("biomaRt")
human = useMart("ensembl", dataset = "hsapiens_gene_ensembl")
human
human
human@biomart
human@dataset
class(human@dataset)
human@filters
getLDS
?getLDS
listAttributes()
listAttributes(mart)
?useMart
mart = useMart('ensembl')
listDatasets(mart)
listAttributes(mart)
genesV2 = getLDS(attributes = c("mgi_symbol"),
filters = "mgi_symbol",
values = x , mart = mouse, attributesL = c("hgnc_symbol"), martL = human, uniqueRows=T)
human = useMart("ensembl", dataset = "hsapiens_gene_ensembl")
mouse = useMart("ensembl", dataset = "mmusculus_gene_ensembl")
genesV2 = getLDS(attributes = c("mgi_symbol"),
filters = "mgi_symbol",
values = x , mart = mouse, attributesL = c("hgnc_symbol"), martL = human, uniqueRows=T)
?getLDS
listAttributes()
listAttributes(human)
listAttributes(human)
listAttributes(human)->hsAttr
View(hsAttr)
genesV2 = getLDS(attributes = c("hgnc_symbol"), filters = "hgnc_symbol",
mart = human, attributesL = c("mgi_symbol"), martL = mouse, uniqueRows=T)
genesV2 = getLDS(attributes = c("hgnc_symbol"),
mart = human, attributesL = c("mgi_symbol"), martL = mouse, uniqueRows=T)
genesV2
dim(genesV2)
genesV2 = getLDS(attributes = c("hgnc_symbol","ensembl_gene_id"),
mart = human, attributesL = c("mgi_symbol"), martL = mouse, uniqueRows=T)
genesV2
genesV2$HGNC.symbol=="TRIM33"
genesV2[genesV2$HGNC.symbol=="TRIM33",]
genesV2 = getLDS(attributes = c("hgnc_symbol","ensembl_gene_id"),
mart = human, attributesL = c("mgi_symbol","ensembl_gene_id"), martL = mouse, uniqueRows=T)
genesV2
listFilters(human)
genesV2
genesV2 = getLDS(attributes = c("hgnc_symbol","ensembl_gene_id","entrezgene_id"),
mart = human, attributesL = c("mgi_symbol","ensembl_gene_id","entrezgene_id"), martL = mouse, uniqueRows=T)
genesV2
genesV2[genesV2$HGNC.symbol==TBC1D3 ,]
genesV2[genesV2$HGNC.symbol=="TBC1D3" ,]
mouse2human = getLDS(attributes = c("mgi_symbol","ensembl_gene_id","entrezgene_id"),  mart = mouse,
attributesL= c("hgnc_symbol","ensembl_gene_id","entrezgene_id"), martL = human, , uniqueRows=T)
mouse2human
read.table(file="./msigdb_v7/c2.cp.v7.0.symbols.gmt")
\
setwd("E:/code/mmuMSigDB")
read.table(file="./msigdb_v7/c2.cp.v7.0.symbols.gmt")
setwd("E:/code/mmuMSigDB")
read.table(file="./msigdb_v7/c2.cp.v7.0.symbols.gmt")
read.table(file="./msigdb_v7/c2.cp.v7.0.symbols.gmt", sep="\t")
read.table(file="./msigdb_v7/c2.cp.v7.0.symbols.gmt", sep="\t")
#Author: Minghui Wang
read.gmt=function(filename){
if(! file.exists(filename)) stop('File ',filename,' not available\n')
dat=readLines(filename)
n=length(dat)
res=list(genesets=vector(mode = "list", length = n),geneset.names=vector(mode = "character", length = n),geneset.descriptions=vector(mode = "character", length = n))
for(i in 1:n){
s=strsplit(dat[i],'\t')[[1]]
res$genesets[[i]]=s[-c(1:2)]
res$geneset.names[i]=s[1]
res$geneset.descriptions[i]=s[2]
}
names(res$genesets)=res$geneset.names
res
}
#
write.gmt=function(obj,filename){
conn=file(filename,'w')
for(i in 1:length(obj$genesets)){
cat(obj$geneset.names[i],obj$geneset.descriptions[i],obj$genesets[[i]],file=conn,sep='\t')
cat('\n',file=conn)
}
close(conn)
return(invisible())
}
read.gmt(filename="./msigdb_v7/c2.cp.v7.0.symbols.gmt", sep="\t")
read.gmt(filename="./msigdb_v7/c2.cp.v7.0.symbols.gmt")
warnings()
c2.cp <- read.gmt(filename="./msigdb_v7/c2.cp.v7.0.symbols.gmt")
head(c2.cp$geneset.descriptions)
head(c2.cp$genesets)
class(c2.cp$genesets)
names(c2.cp$genesets)
c2.cp$genesets
c2.cp$genesets[1]
c2.cp$genesets[[1]]
c2.cp$genesets[[2]]
setwd("E:/code/mmuMSigDB")
#Author: Minghui Wang
read.gmt=function(filename){
if(! file.exists(filename)) stop('File ',filename,' not available\n')
dat=readLines(filename)
n=length(dat)
res=list(genesets=vector(mode = "list", length = n),geneset.names=vector(mode = "character", length = n),geneset.descriptions=vector(mode = "character", length = n))
for(i in 1:n){
s=strsplit(dat[i],'\t')[[1]]
res$genesets[[i]]=s[-c(1:2)]
res$geneset.names[i]=s[1]
res$geneset.descriptions[i]=s[2]
}
names(res$genesets)=res$geneset.names
res
}
#
write.gmt=function(obj,filename){
conn=file(filename,'w')
for(i in 1:length(obj$genesets)){
cat(obj$geneset.names[i],obj$geneset.descriptions[i],obj$genesets[[i]],file=conn,sep='\t')
cat('\n',file=conn)
}
close(conn)
return(invisible())
}
c2.cp <- read.gmt(filename="./msigdb_v7/c2.cp.v7.0.symbols.gmt")
c2.cp[[1]]
c2.cp$genesets
length(c2.cp$genesets)
c2.cp$genesets[[1]]
lst <- list(c(1,2),c(2,4,5),c(5,9,1))
lst
unlist(lst)
unique(unlist(lst))
unique(unlist(c2.cp$genesets))
msigdb.genes <- unique(unlist(c2.cp$genesets))
msigdb.genes
c2.cp <- read.gmt(filename = "./msigdb_v7/c2.cp.v7.0.symbols.gmt")
c5.bp <- read.gmt(filename = "./msigdb_v7/c5.bp.v7.0.symbols.gmt")
c7.all<- read.gmt(filename = "./msigdb_v7/c7.all.v7.0.symbols.gmt")
c7.all
msigdb.genes <- unique(
c(unique(unlist(c2.cp$genesets)),
unique(unlist(c5.bp$genesets)),
unique(unlist(c7.all$genesets))) )
msigdb.genes
msigdb.gene.symbols
msigdb.gene.symbols <- unique(
c(unique(unlist(c2.cp$genesets)),
unique(unlist(c5.bp$genesets)),
unique(unlist(c7.all$genesets))) )
msigdb.gene.symbols
library("biomaRt")
human = useMart("ensembl", dataset = "hsapiens_gene_ensembl")
mouse = useMart("ensembl", dataset = "mmusculus_gene_ensembl")
human = useMart("ensembl", dataset = "hsapiens_gene_ensembl")
mouse = useMart("ensembl", dataset = "mmusculus_gene_ensembl")
human2mouse = getLDS(attributes = c("hgnc_symbol","ensembl_gene_id","entrezgene_id"), mart = human,
attributesL = c("mgi_symbol","ensembl_gene_id","entrezgene_id"), martL = mouse, uniqueRows=T)
head(human2mouse)
human2mouse$HGNC.symbol==msigdb.gene.symbols
msigdb.gene.symbols
human2mouse$HGNC.symbol
human2mouse$HGNC.symbol
class(human2mouse$HGNC.symbol)
1 %in% c(1,2,3)
1 %in% c("1",2,3)
"1" %in% c(1,2,3)
1"1" %in% c(1,2,3)
11 %in% c(1,2,3)
c(1,2,3,4) %in% c(1,2,3)
human2mouse$HGNC.symbol
msigdb.gene.symbols %in% human2mouse$HGNC.symbol
length(msigdb.gene.symbols)
msigdb.gene.symbols %in% human2mouse$HGNC.symbol
!msigdb.gene.symbols %in% human2mouse$HGNC.symbol
msigdb.gene.symbols[!msigdb.gene.symbols %in% human2mouse$HGNC.symbol]
head(human2mouse)
View(human2mouse)
msigdb.gene.symbols[!msigdb.gene.symbols %in% human2mouse$HGNC.symbol]
c2.cp[[1]]
c2.cp$genesets[[1]]
#=======================================================================
missed <-! msigdb.gene.symbols %in% human2mouse$HGNC.symbol
#=======================================================================
gene.symbol.missed <-! msigdb.gene.symbols %in% human2mouse$HGNC.symbol
gene.symbol.missed
#=======================================================================
gene.symbol.missed <-msigdb.gene.symbols[! msigdb.gene.symbols %in% human2mouse$HGNC.symbol]
gene.symbol.missed
human2mouse
which(human2mouse$MGI.symbol, human2mouse$MGI.symbol==NA)
human2mouse$MGI.symbol
human2mouse$MGI.symbol==NA
is.na(human2mouse$MGI.symbol)
sum(is.na(human2mouse$MGI.symbol))
sum(human2mouse$MGI.symbol=="")
sum(human2mouse$NCBI.gene.ID.1=="")
sum(is.na(human2mouse$NCBI.gene.ID.1))
